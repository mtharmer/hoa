<div id="<%= dom_id post %>" class="flex flex-col sm:flex-row justify-between items-center pb-5 sm:pb-0 shadow w-xl">
  <div class="flex w-full space-y-2">
    <div class='p-4 bg-white shadow-stone-800 shadow-md rounded-md w-full'>
      <strong class="block font-medium mb-1"><%= "#{post.user.name} - #{post.user.address&.address}" %></strong>
      <p class="text-sm text-gray-500 mb-2"><%= post.created_at.strftime('%B %d, %Y at %I:%M %p') %></p>
      <p class='whitespace-pre-wrap'><%= post.message %></p>
      
      <div class='flex flex-row justify-between'>
        <button data-controller='post' data-action='click->post#comment' id="post-button-<%= post.id %>" class="mt-2 text-white bg-blue-600 hover:bg-blue-500 rounded-sm px-2 py-1 cursor-pointer">
          Comment
        </button>
        <% if current_user == post.user %>
          <%= button_to 'Delete', post_path(post), method: :delete, form: { data: { turbo_confirm: 'Are you sure?' } }, class: 'mt-2 text-red-600 hover:text-red-500 cursor-pointer border border-red-600 rounded-sm px-2 py-1' %>
        <% end %>
      </div>
      <div class='flex flex-row'>
        <button data-controller='post' data-action='click->post#expand' id="post-expand-button-<%= post.id %>" class="mt-2 text-gray-600 hover:text-gray-500 border rounded-sm px-2 py-1 cursor-pointer">
          <span class="expand-text">Expand</span>
          <span class="collapse-text hidden">Collapse</span>
        </button>
      </div>
      <div id='comment-form-<%= post.id %>' class="hidden">
        <%= render 'posts/comments/form', comment: Comment.new, post: post %>
        <button data-controller='post' data-action='click->post#cancel' id="cancel-button-<%= post.id %>" class="mt-2 ml-2 text-gray-600 hover:text-gray-500 border rounded-sm px-2 py-1 cursor-pointer">
          Cancel
        </button>
      </div>
      <div id='comment-list-<%= post.id %>' class="mt-4 space-y-2 hidden">
        <% post.comments.each do |comment| %>
          <%= render 'posts/comments/comment', comment: comment %>
        <% end %>
      </div>
    </div>
  </div>
</div>
